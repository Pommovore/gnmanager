{# Modal dialogs for event - extracted from event_detail.html #}

{# Join Modal #}
<div class="modal fade" id="joinModal" tabindex="-1" aria-labelledby="joinModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="joinModalLabel"><span id="modalActionType">Inscription</span> à {{
                    event.name }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="{{ url_for('event.join', event_id=event.id) }}" method="POST">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Type d'inscription</label>
                        <select name="type" class="form-select" id="joinTypeSelect">
                            <option value="PJ">PJ</option>
                            <option value="PNJ">PNJ</option>
                            <option value="Organisateur">Organisateur</option>
                        </select>
                    </div>

                    {# Zone dynamique pour le message d'aide et commentaire #}
                    <div id="joinHelpWithMessage" class="alert alert-secondary d-none">
                        les inscriptions ne sont pas actuellement en cours, laissez nous un message avec une précision
                        concernant votre demande
                    </div>

                    <!-- Consentement partage coordonnées -->
                    <div class="mb-3">
                        <label class="form-label fw-bold">Partager mes coordonnées avec les organisateurs</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="share_facebook" id="share_facebook"
                                checked>
                            <label class="form-check-label" for="share_facebook">
                                <i class="bi bi-facebook text-primary"></i> Transmettre mon Facebook
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="share_discord" id="share_discord"
                                checked>
                            <label class="form-check-label" for="share_discord">
                                <i class="bi bi-discord text-primary"></i> Transmettre mon Discord
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="share_phone" id="share_phone" checked>
                            <label class="form-check-label" for="share_phone">
                                <i class="bi bi-smartphone text-success"></i> Transmettre mon numéro de téléphone
                            </label>
                        </div>
                        <div class="form-text">Vous pourrez modifier ces informations plus tard depuis votre espace
                            événement</div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label" id="commentLabel">Une précision ?</label>
                        <textarea name="comment" class="form-control" rows="3"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-success">Valider ma demande</button>
                </div>

            </form>
        </div>
    </div>
</div>

{# Delete Event Modal #}
<div class="modal fade" id="deleteEventModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill"></i> Supprimer l'événement ?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p><strong>Attention !</strong> Cette action est <u>irréversible</u>.</p>
                <p>Vous êtes sur le point de supprimer l'événement <strong>{{ event.name }}</strong>.</p>
                <div class="text-danger">
                    Ceci supprimera définitivement :
                    <ul>
                        <li>Toutes les informations de l'événement</li>
                        <li>Toutes les inscriptions et participants</li>
                        <li>Tous les rôles configurés</li>
                    </ul>
                </div>
                <p>Êtes-vous sûr de vouloir continuer ?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <form action="{{ url_for('event.delete_event', event_id=event.id) }}" method="POST">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                    <button type="submit" class="btn btn-danger">Oui, tout supprimer</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/event_modals.js') }}"></script>